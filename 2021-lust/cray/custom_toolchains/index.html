
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://easybuilders.github.io/easybuild-tutorial/2021-lust/cray/custom_toolchains/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.8">
    
    
      
        <title>Custom Cray toolchains - EasyBuild tutorial</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#custom-cray-toolchains" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="EasyBuild tutorial" class="md-header__button md-logo" aria-label="EasyBuild tutorial" data-md-component="logo">
      
  <img src="../../../img/easybuild_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EasyBuild tutorial
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Custom Cray toolchains
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/easybuilders/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    EasyBuild @ GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="EasyBuild tutorial" class="md-nav__button md-logo" aria-label="EasyBuild tutorial" data-md-component="logo">
      
  <img src="../../../img/easybuild_logo.png" alt="logo">

    </a>
    EasyBuild tutorial
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/easybuilders/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    EasyBuild @ GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        ISC-20 (June '20)
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="ISC-20 (June '20)" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          ISC-20 (June '20)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/" class="md-nav__link">
        Start page
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/practical_information/" class="md-nav__link">
        Practical information
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/basic_usage/" class="md-nav__link">
        Basic usage
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/hmns/" class="md-nav__link">
        Hierarchical module naming schemes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/adding_support_software/" class="md-nav__link">
        Adding support for additional software
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/jsc/" class="md-nav__link">
        EasyBuild at Jülich Supercomputing Centre
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/computecanada/" class="md-nav__link">
        EasyBuild at Compute Canada
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/community/" class="md-nav__link">
        The EasyBuild community
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/contributing/" class="md-nav__link">
        Contributing to EasyBuild
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/comparison_other_tools/" class="md-nav__link">
        Comparison with other tools
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../2020-06-isc20/getting_help/" class="md-nav__link">
        Getting help
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        LUST (spring '21)
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="LUST (spring '21)" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          LUST (spring '21)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        (overview)
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2">
        Introduction to EasyBuild
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Introduction to EasyBuild" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Introduction to EasyBuild
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../part1_intro/" class="md-nav__link">
        (overview)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../what_is_easybuild/" class="md-nav__link">
        What is EasyBuild?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../terminology/" class="md-nav__link">
        Terminology
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/" class="md-nav__link">
        Basic usage
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      <label class="md-nav__link" for="__nav_3_3">
        Using EasyBuild
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Using EasyBuild" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Using EasyBuild
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../part2_using/" class="md-nav__link">
        (overview)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../creating_easyconfig_files/" class="md-nav__link">
        Creating easyconfig files
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../implementing_easyblocks/" class="md-nav__link">
        Implementing easyblocks
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      <label class="md-nav__link" for="__nav_3_4">
        Advanced topics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Advanced topics" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Advanced topics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../part3_advanced/" class="md-nav__link">
        (overview)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../easybuild_library/" class="md-nav__link">
        Using EasyBuild as a library
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hooks/" class="md-nav__link">
        Using hooks to customise EasyBuild
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../slurm_jobs/" class="md-nav__link">
        Submitting installations as Slurm jobs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../module_naming_schemes/" class="md-nav__link">
        Module naming schemes (incl. hierarchical)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../github_integration/" class="md-nav__link">
        GitHub integration to facilitate contributing to EasyBuild
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" checked>
      
      <label class="md-nav__link" for="__nav_3_5">
        EasyBuild on Cray systems
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="EasyBuild on Cray systems" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          EasyBuild on Cray systems
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../part4_cray/" class="md-nav__link">
        (overview)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        Introduction to the Cray PE
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../external_modules/" class="md-nav__link">
        Using external modules
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Custom Cray toolchains
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Custom Cray toolchains
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cray-toolchains" class="md-nav__link">
    Cray Toolchains
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpe-toolchains" class="md-nav__link">
    CPE Toolchains
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpe-compilers" class="md-nav__link">
    CPE Compilers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target-architecture" class="md-nav__link">
    Target Architecture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#easyconfig-for-custom-toolchains" class="md-nav__link">
    Easyconfig for custom toolchains
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-applications" class="md-nav__link">
    Supported Applications
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-build" class="md-nav__link">
    Example build
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../easybuild_at_cscs/" class="md-nav__link">
        EasyBuild at CSCS
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cray-toolchains" class="md-nav__link">
    Cray Toolchains
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpe-toolchains" class="md-nav__link">
    CPE Toolchains
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpe-compilers" class="md-nav__link">
    CPE Compilers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target-architecture" class="md-nav__link">
    Target Architecture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#easyconfig-for-custom-toolchains" class="md-nav__link">
    Easyconfig for custom toolchains
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-applications" class="md-nav__link">
    Supported Applications
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-build" class="md-nav__link">
    Example build
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/easybuilders/easybuild-tutorial/edit/master/docs/2021-lust/cray/custom_toolchains.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="custom-cray-toolchains">Custom Cray toolchains<a class="headerlink" href="#custom-cray-toolchains" title="Permanent link">&para;</a></h1>
<p>EasyBuild custom toolchains have been created to address the Cray Programming Environment. </p>
<p>Together with the classical Cray toolchains, we have recently created CPE toolchains that 
targeted specifically the Cray Programming Environment on the Cray EX system (formerly Shasta).</p>
<p>As of CPE 21.04 though, the difference between the Cray Programming Environment on the XC and
the EX systems is not relevant any longer, since they rely both on the PrgEnv meta-modules.</p>
<p>Nonetheless, the versions of the CPE components that come with a CPE release might change 
depending on the target system, therefore a different external metadata file is required:
see <a href="https://github.com/eth-cscs/production/tree/master/easybuild">https://github.com/eth-cscs/production/tree/master/easybuild</a> to inspect the difference between two metadata file referring to the same version. </p>
<p>E.g.: <code>cpe_external_modules_metadata-21.05.cfg</code> vs. <code>cray_external_modules_metadata-20.05.cfg</code></p>
<p>Furthermore, different easyconfig files might be needed to build the same software on the 
two systems even with the same Cray PE, therefore the maintainers would need to provide 
two versions anyway.   </p>
<p>-- </p>
<h2 id="cray-toolchains">Cray Toolchains<a class="headerlink" href="#cray-toolchains" title="Permanent link">&para;</a></h2>
<p>EasyBuild supports Cray systems as of version 2.7.0, enabling building and installing software using 
the Programming Environment modulefiles provided by Cray. </p>
<p>The EasyBuild Cray toolchains currently supported in the <a href="https://github.com/easybuilders/easybuild-framework">GitHub repository</a> 
are the following ones:</p>
<ul>
<li><code>CrayCCE</code></li>
<li><code>CrayGNU</code></li>
<li><code>CrayIntel</code></li>
<li><code>CrayPGI</code></li>
</ul>
<p>Each Cray toolchain comes with a version matching the corresponding Cray Development Toolkit (CDT) modulefile on the 
Cray XC system. </p>
<p>Therefore, the toolchain will load the corresponding Cray Programming Environment, together with the compiler, 
the Cray MPICH library and the Cray mathematical library with versions matching the definition of the CDT. </p>
<p>Please note that the toolchains follow the naming convention of the Cray Programming Environment, 
that is released on a monthly basis: as a consequence, the version of the toolchain modules has 
the format <code>YY.MM</code> (two digits for the year, two digits for the month). </p>
<hr />
<h2 id="cpe-toolchains">CPE Toolchains<a class="headerlink" href="#cpe-toolchains" title="Permanent link">&para;</a></h2>
<p>The CPE toolchains have been created initially to match the modules of the Cray EX system up to CPE 21.03:</p>
<ul>
<li><code>cpe-cray</code></li>
<li><code>cpe-aocc</code></li>
<li><code>cpe-gnu</code></li>
<li><code>cpe-intel</code></li>
</ul>
<p>As of CPE 21.04 though, the CPE of the Cray EX system features as well <code>PrgEnv</code> meta-modules.
Therefore the difference with respect to the standard Cray toolchain has disappeared.</p>
<p>The CPE toolchains are defined by the custom easyblock <code>cpetoolchain.py</code>:
<div class="highlight"><pre><span></span><code>KNOWN_PRGENVS = [&#39;PrgEnv-aocc&#39;, &#39;PrgEnv-cray&#39;, &#39;PrgEnv-gnu&#39;, &#39;PrgEnv-intel&#39;]
</code></pre></div></p>
<p>The <a href="https://github.com/eth-cscs/production/blob/master/easybuild/easyblocks/cpetoolchain.py">file</a> is available in the <a href="https://github.com/eth-cscs/production">CSCS production repository on GitHub</a>, that is also mirrored under the <a href="https://github.com/easybuilders">EasyBuilders GitHub project</a> at <a href="https://github.com/easybuilders/CSCS">https://github.com/easybuilders/CSCS</a>. </p>
<hr />
<h2 id="cpe-compilers">CPE Compilers<a class="headerlink" href="#cpe-compilers" title="Permanent link">&para;</a></h2>
<p>The custom CPE toolchains rely on specific files of the local EasyBuild framework:
<div class="highlight"><pre><span></span><code>cpeamd.py
cpecray.py
cpegnu.py
cpeintel.py
</code></pre></div></p>
<p>The first one will look for the custom compiler <code>aocc.py</code>, while the other ones are compatible 
with the compilers defined by the Cray toolchains initially defined on the XC system.</p>
<p>The custom toolchains above will look for the custom <code>cpe.py</code> supporting the Cray Programming Environment 
(craype) compiler drivers. </p>
<p>Please note that as well as the custom easyblock <code>cpetoolchain.py</code>, the custom files are available in the <a href="https://github.com/eth-cscs/production/tree/master/easybuild/toolchains">toolchains</a> and the <a href="https://github.com/eth-cscs/production/tree/master/easybuild/toolchains/compiler">compiler</a> folders of the <a href="https://github.com/eth-cscs/production">CSCS production repository on GitHub</a>.</p>
<hr />
<h2 id="target-architecture">Target Architecture<a class="headerlink" href="#target-architecture" title="Permanent link">&para;</a></h2>
<p>The module <code>craype-&lt;target&gt;</code> matching the target architecture must be specified using the EasyBuild flag <code>--optarch</code>.</p>
<p>E.g.: <code>--optarch=x86-rome results in module</code>craype-x86-rome` being loaded in the build environment used by EasyBuild.</p>
<p>You can also export this option as a shell variable. Example for AMD EPYC 7742 ("Rome"):
<div class="highlight"><pre><span></span><code>export $EASYBUILD_OPTARCH=x86-rome
</code></pre></div></p>
<p>The definition of the correct module to load with the <code>--optarch</code> is also given by the environment variable <code>CRAY_CPU_TARGET</code>:
this variable is defined as well by the corresponding module <code>craype-&lt;target&gt;</code>, already available at the login. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The custom EasyBuild modulefile used on CSCS systems will look for <code>CRAY_CPU_TARGET</code> to define <code>--optarch</code>, 
therefore users are strongly discouraged from purging the modules already available at login on the system</p>
</div>
<hr />
<h2 id="easyconfig-for-custom-toolchains">Easyconfig for custom toolchains<a class="headerlink" href="#easyconfig-for-custom-toolchains" title="Permanent link">&para;</a></h2>
<p>The easyconfig files of the current default custom toolchains were using a footer to address two issues that have been fixed in the latest EasyBuild release 4.4.0.</p>
<p>Therefore, when using the latest EasyBuild release one could write a much shorter <a href="https://github.com/eth-cscs/production/blob/master/easybuild/easyconfigs/c/cpeGNU/cpeGNU-21.04.eb">easyconfig file</a> for the custom toolchains. </p>
<p>For instale the cpeGNU custom toolchain easyconfig file would like the following:
<div class="highlight"><pre><span></span><code># Compiler toolchain for Cray EX Programming Environment GNU compiler (cpe-gnu)
easyblock = &#39;cpeToolchain&#39;

name = &#39;cpeGNU&#39;
version = &quot;21.04&quot;

homepage = &#39;https://pubs.cray.com&#39;
description = &quot;&quot;&quot;Toolchain using Cray compiler wrapper with gcc module (CPE release: %s).\n&quot;&quot;&quot; % version

toolchain = SYSTEM

dependencies = [
   (&#39;cpe/%(version)s&#39;, EXTERNAL_MODULE),
   (&#39;PrgEnv-gnu&#39;, EXTERNAL_MODULE)
]
</code></pre></div></p>
<p>The meta-module <code>cpe</code> will ensure that the additional modules loaded by a user will be compatible with the default Cray PE selected.</p>
<p>The advantage of the approach is to avoid pinning directly the versions of CPE components in the custom toolchain definitions. </p>
<p>Of course the maintainers could also decide to pin directl the version of each CPE component in the easyconfig, 
however this approach is less easy to fit in an automated pipeline for updating recipes when new Cray PEs are installed. </p>
<hr />
<h2 id="supported-applications">Supported Applications<a class="headerlink" href="#supported-applications" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code> Buildah-1.19.0.eb                    --set-default-module
 CMake-3.20.1.eb                      --set-default-module
 ddt-21.0-linux-x86_64.eb             --set-default-module
 hub-2.14.2.eb                        --set-default-module
 hwloc-2.4.1.eb                       --set-default-module
 jupyter-utils-0.1.eb                 --set-default-module
 reframe-3.5.3.eb                     --set-default-module
 xalt-2.8.10.eb                       --set-default-module
 GSL-2.6-cpeAMD-21.03.eb
 GSL-2.6-cpeCray-21.03.eb
 ParaView-5.9.0-cpeCray-21.03-OSMesa-python3.eb
 Boost-1.75.0-cpeGNU-21.03.eb
 Boost-1.75.0-cpeGNU-21.03-python3.eb --set-default-module
 CP2K-8.1-cpeGNU-21.03.eb
 GREASY-19.03-cscs-cpeGNU-21.03.eb
 GROMACS-2020.5-cpeGNU-21.03.eb
 GSL-2.6-cpeGNU-21.03.eb
 jupyterlab-2.2.8-cpeGNU-21.03.eb
 LAMMPS-29Oct20-cpeGNU-21.03.eb
 matplotlib-3.3.4-cpeGNU-21.03.eb
 NCO-4.9.8-cpeGNU-21.03.eb
 QuantumESPRESSO-6.7.0-cpeGNU-21.03.eb
 Vc-1.4.1-cpeGNU-21.03.eb           
 Amber-20-15-9-cpeIntel-21.03.eb
 GSL-2.6-cpeIntel-21.03.eb
 NAMD-2.14-cpeIntel-21.03.eb
 VASP-6.2.0-cpeIntel-21.03.eb
</code></pre></div>
<hr />
<h2 id="example-build">Example build<a class="headerlink" href="#example-build" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>eb --ignore-locks -r --try-toolchain-version=21.05  Amber-20-15-9-cpeIntel-21.04.eb
== Temporary log file in case of crash /run/user/23395/easybuild/tmp/eb-ss0j8hgy/easybuild-ywc85qhu.log
== found valid index for /apps/common/UES/easybuild/software/EasyBuild/4.3.4/easybuild/easyconfigs, so using it...
== resolving dependencies ...
== processing EasyBuild easyconfig /run/user/23395/easybuild/tmp/eb-ss0j8hgy/tweaked\_easyconfigs/Amber-20-15-9-cpeIntel-21.05.eb
== building and installing Toolchain/cpeIntel/21.05/Amber/20-15-9...
== fetching files...
== creating build dir, resetting environment...
== unpacking...
== patching...
== preparing...
== configuring...
== building...
== testing...
== installing...
== taking care of extensions...
== restore after iterating...
== postprocessing...
== sanity checking...
== cleaning up...
== creating module...
== permissions...
== packaging...
== COMPLETED: Installation ended successfully (took 2 hours 0 min 8 sec)
== Results of the build can be found in the log file(s) /apps/pilatus/UES/jenkins/1.4.0/software/Amber/20-15-9-cpeIntel-21.05/easybuild/easybuild-Amber-20-15-9-20210521.203937.log
== Build succeeded for 1 out of 1
== Temporary log file(s) /run/user/23395/easybuild/tmp/eb-ss0j8hgy/easybuild-ywc85qhu.log\* have been removed.
== Temporary directory /run/user/23395/easybuild/tmp/eb-ss0j8hgy has been removed.
</code></pre></div>
<p><em><a href="../easybuild_at_cscs/">[next: EasyBuild at CSCS]</a></em></p>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">June 17, 2021</span>
      
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../external_modules/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Using external modules" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Using external modules
            </div>
          </div>
        </a>
      
      
        
        <a href="../easybuild_at_cscs/" class="md-footer__link md-footer__link--next" aria-label="Next: EasyBuild at CSCS" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              EasyBuild at CSCS
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://twitter.com/easy_build" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.youtube.com/c/easybuilders" target="_blank" rel="noopener" title="www.youtube.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://easybuild.readthedocs.io" target="_blank" rel="noopener" title="easybuild.readthedocs.io" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["instant"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.76f349be.min.js"></script>
      
    
  </body>
</html>